
exports.up = function(knex) {
    return knex.schema
    .createTable("activity", activity=> {
        activity.increments();
        activity.string("usgs_id").unique();
        activity.decimal("mag");
        activity.string("place");
        activity.bigInteger("time");
        activity.bigInteger("updated");
        activity.integer("tz");
        activity.string("url");
        activity.string("detail");
        activity.integer("felt");
        activity.decimal("cdi");
        activity.decimal("mmi");
        activity.string("alert");
        activity.string("status");
        activity.integer("tsunami");
        activity.integer("sig");
        activity.string("net");
        activity.string("code");
        activity.string("ids");
        activity.string("sources");
        activity.string("types");
        activity.integer("nst");
        activity.decimal("dmin");
        activity.decimal("rms");
        activity.decimal("gap");
        activity.string("magType");
        activity.string("type");
        activity.string("title");
    })

    .createTable("geometry", geometry=>{
        geometry.increments();
        geometry.string("type");
        geometry.string("coordinates");
        geometry.string("usgs_id")
            .notNullable().unique()
            .references('usgs_id').inTable('activity')
    })
    .createTable("all_time", activity=> {
        activity.increments();
        activity.string("usgs_id").unique();
        activity.decimal("mag");
        activity.string("place");
        activity.bigInteger("time");
        activity.bigInteger("updated");
        activity.integer("tz");
        activity.string("url");
        activity.string("detail");
        activity.integer("felt");
        activity.decimal("cdi");
        activity.decimal("mmi");
        activity.string("alert");
        activity.string("status");
        activity.integer("tsunami");
        activity.integer("sig");
        activity.string("net");
        activity.string("code");
        activity.string("ids");
        activity.string("sources");
        activity.string("types");
        activity.integer("nst");
        activity.decimal("dmin");
        activity.decimal("rms");
        activity.decimal("gap");
        activity.string("magType");
        activity.string("type");
        activity.string("title");
    })

    .createTable("geometry_all_time", geometry=>{
        geometry.increments();
        geometry.string("type");
        geometry.string("coordinates");
        geometry.string("usgs_id")
            .notNullable().unique()
            .references('usgs_id').inTable('all_time')
    })
    .createTable("nukes", activity=> {
        activity.increments();
        activity.string("usgs_id").unique();
        activity.decimal("mag");
        activity.string("place");
        activity.bigInteger("time");
        activity.bigInteger("updated");
        activity.integer("tz");
        activity.string("url");
        activity.string("detail");
        activity.integer("felt");
        activity.decimal("cdi");
        activity.decimal("mmi");
        activity.string("alert");
        activity.string("status");
        activity.integer("tsunami");
        activity.integer("sig");
        activity.string("net");
        activity.string("code");
        activity.string("ids");
        activity.string("sources");
        activity.string("types");
        activity.integer("nst");
        activity.decimal("dmin");
        activity.decimal("rms");
        activity.decimal("gap");
        activity.string("magType");
        activity.string("type");
        activity.string("title");
    })
    .createTable("geometry_nukes", geometry=>{
        geometry.increments();
        geometry.string("type");
        geometry.string("coordinates");
        geometry.string("usgs_id")
            .notNullable().unique()
            .references('usgs_id').inTable('nukes')
    })
    .createTable("tsunami", activity=> {
        activity.increments();
        activity.string("usgs_id").unique();
        activity.decimal("mag");
        activity.string("place");
        activity.bigInteger("time");
        activity.bigInteger("updated");
        activity.integer("tz");
        activity.string("url");
        activity.string("wiki");
        activity.string("detail");
        activity.integer("felt");
        activity.decimal("cdi");
        activity.decimal("mmi");
        activity.string("alert");
        activity.string("status");
        activity.integer("tsunami");
        activity.integer("sig");
        activity.string("net");
        activity.string("code");
        activity.string("ids");
        activity.string("sources");
        activity.string("types");
        activity.integer("nst");
        activity.decimal("dmin");
        activity.decimal("rms");
        activity.decimal("gap");
        activity.string("magType");
        activity.string("type");
        activity.string("title");
    })
    .createTable("geometry_tsunami", geometry=>{
        geometry.increments();
        geometry.string("type");
        geometry.string("coordinates");
        geometry.string("usgs_id")
            .notNullable().unique()
            .references('usgs_id').inTable('tsunami')
    })
};

exports.down = function(knex) {
    return knex.schema
    .dropTableIfExists("geometry_tsunami")
    .dropTableIfExists("tsunami")
    .dropTableIfExists("geometry_nukes")
    .dropTableIfExists("nukes")
    .dropTableIfExists("geometry_all_time")
    .dropTableIfExists("all_time")
    .dropTableIfExists("geometry")
    .dropTableIfExists("activity")
};
